---
date: 2014-07-07 16:23:40(UTC+0800)
layout: post
title: 初探闭包
thread: 20
categories: jsStudyLog
tags: jsStudyLog
---

###什么是闭包
概念定义说法非常多，先写一个纯正闭包
```javascript
function a(){
	var i=0;
	function b(){
		alert(++i);
	}
	return b;
}
var c = a();
c();
```
这个函数有几个特点：
</br>1、函数`b`嵌套在函数`a`中；
</br> 2、函数`a`返回函数`b`。
</br>当函数`a`的内部函数b被函数`a`外的一个变量引用的时候，就创建了一个闭包。
</br>函数的执行过程：
</br>1、在`var c = a();`执行了a函数，那么肯定`a`经过了`return`，按照主流语言的函数特性，现在`c`的值就是`a`的返回值。
</br>2、在`c();`的执行实际执行的就是b函数，最后不管执行的是谁，会弹出一个值为1的窗口，到此为止，所有的生命周期按理论来说就算全部结束了，可是,如果我们再多执行一行`var c = a();c();c();`，第一次弹出`1`，第二次执行却弹出了`2`。
</br>3、也就是说,第一次`c();`后，`a`中的`i`依然保留，自然`a`在内存的栈区依然保留。`a`是`return`过了，但是，`a`及内部值却依然存在，这就是闭包。
###闭包特性
1. 闭包外层是个函数
2. 闭包内部存在函数
3. 闭包会返回内部函数
4. 闭包返回的函数的内部不能有返回值（因为这样就真的结束了）
5. 执行闭包后，闭包内部变量会存在，而闭包内部函数的内部变量不会存在
###闭包作用
闭包的作用就是在`a`执行完并返回后，闭包使得JavaScript的垃圾回收机制GC不会收回`a`所占用的资源，因为`a`的内部函数`b`的执行需要依赖`a`中的变量。（这个还是需要进一步再了解，感觉还不够严谨，之后的学习会继续更新）



